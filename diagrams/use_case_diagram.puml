@startuml
' Diagramme de Cas d'Utilisation pour l'Application PfeAziz

' Acteurs
actor "Utilisateur" as user
actor "Administrateur" as admin
actor "Contrôleur" as controleur
actor "Opérateur" as operateur
actor "Délégué" as delegue
actor "Système" as system

' Cas d'Utilisation
package "Authentification" {
  usecase "Se connecter" as login
  usecase "Se déconnecter" as logout
  usecase "Gérer les utilisateurs" as manageUsers
  usecase "Gérer les rôles" as manageRoles
}

package "Gestion des Données de Référence" {
  usecase "Gérer les îlots" as manageIlots
  usecase "Gérer les machines" as manageMachines
  usecase "Gérer les métiers" as manageMetiers
  usecase "Gérer les programmes" as manageProgrammes
}

package "Initialisation des Données" {
  usecase "Initialiser les rôles" as initRoles
  usecase "Initialiser les utilisateurs" as initUsers
  usecase "Initialiser les îlots" as initIlots
  usecase "Initialiser les machines" as initMachines
  usecase "Initialiser les métiers" as initMetiers
  usecase "Initialiser les programmes" as initProgrammes
  usecase "Initialiser les demandes" as initDemandes
}

package "Gestion des Demandes Standard" {
  usecase "Créer une demande" as createDemand
  usecase "Consulter les demandes" as viewDemands
  usecase "Mettre à jour une demande" as updateDemand
  usecase "Supprimer une demande" as deleteDemand
  usecase "Exporter les demandes vers Excel" as exportDemands
  usecase "Démarrer le contrôle" as startControl
  usecase "Terminer le contrôle" as finishControl
  usecase "Enregistrer le résultat" as recordResult
}

package "Gestion des Demandes Déléguées" {
  usecase "Créer une demande déléguée" as createDemandeDelegue
  usecase "Consulter les demandes déléguées" as viewDemandesDelegue
  usecase "Mettre à jour une demande déléguée" as updateDemandeDelegue
  usecase "Supprimer une demande déléguée" as deleteDemandeDelegue
  usecase "Exporter les demandes déléguées vers Excel" as exportDemandesDelegue
}

package "Gestion des Demandes Finales" {
  usecase "Créer une demande finale" as createDemandeFinale
  usecase "Consulter les demandes finales" as viewDemandesFinale
  usecase "Mettre à jour une demande finale" as updateDemandeFinale
  usecase "Supprimer une demande finale" as deleteDemandeFinale
  usecase "Exporter les demandes finales vers Excel" as exportDemandesFinale
}

package "Gestion des Demandes Techniques" {
  usecase "Créer une demande technique" as createDemandeTe
  usecase "Consulter les demandes techniques" as viewDemandesTe
  usecase "Mettre à jour une demande technique" as updateDemandeTe
  usecase "Supprimer une demande technique" as deleteDemandeTe
  usecase "Exporter les demandes techniques vers Excel" as exportDemandesTe
}

' Relationships
user --> login
user --> logout

admin --> manageUsers
admin --> manageRoles
admin --> manageIlots
admin --> manageMachines
admin --> manageMetiers
admin --> manageProgrammes
admin --> exportDemands
admin --> exportDemandesDelegue
admin --> exportDemandesFinale
admin --> exportDemandesTe

operateur --> createDemand
operateur --> viewDemands

controleur --> viewDemands
controleur --> updateDemand
controleur --> startControl
controleur --> finishControl
controleur --> recordResult

delegue --> createDemandeDelegue
delegue --> viewDemandesDelegue
delegue --> updateDemandeDelegue

' System initialization
system --> initRoles
system --> initUsers
system --> initIlots
system --> initMachines
system --> initMetiers
system --> initProgrammes
system --> initDemandes

' Inheritance
admin --|> user
controleur --|> user
operateur --|> user
delegue --|> user

' Notes
note "L'initialisation des données est effectuée automatiquement au démarrage du système" as N1
N1 .. system

@enduml
